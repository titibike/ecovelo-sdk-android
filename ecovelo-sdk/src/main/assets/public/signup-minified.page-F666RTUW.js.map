{
  "version": 3,
  "sources": ["src/app/pages/auth/signup-minified/signup-minified.page.ts", "src/app/pages/auth/signup-minified/signup-minified.page.html"],
  "sourcesContent": ["import {\n  Component,\n  ViewChild,\n  ElementRef,\n  ChangeDetectorRef,\n  OnInit,\n} from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport {\n  FormControl,\n  FormGroup,\n  FormsModule,\n  ReactiveFormsModule,\n  Validators,\n} from '@angular/forms'\nimport {\n  IonContent,\n  IonInput,\n  IonButton,\n  IonCol,\n  IonText,\n  IonItem,\n  IonRow,\n  ModalController,\n  LoadingController,\n  AlertController,\n} from '@ionic/angular/standalone'\nimport { TranslateModule, TranslateService } from '@ngx-translate/core'\nimport { CountriesComponent } from 'src/app/components/modals/countries/countries.component'\nimport { Country, CountryService } from 'src/app/services/utils/country.service'\nimport { PhoneUtilsService } from 'src/app/services/utils/phone.service'\nimport { HeaderComponent } from 'src/app/components/header/header.component'\nimport { deleteUser, fetchUserAttributes } from 'aws-amplify/auth'\nimport { AuthService } from 'src/app/services/external/auth.service'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { CyclistsService } from 'src/api-cyclist/api/cyclists.service'\nimport { StorageService } from 'src/app/services/utils/storage.service'\nimport { firstValueFrom } from 'rxjs'\nimport { Browser } from '@capacitor/browser'\nimport { environment } from 'src/environments/environment'\nimport { Capacitor } from '@capacitor/core'\nimport { AccountService } from 'src/app/services/api-wrappers/account.service'\nimport { ToastService, ToastType } from 'src/app/services/utils/toast.service'\nimport { ErrorHandlerService } from 'src/app/services/utils/error-handler.service'\n\n@Component({\n  selector: 'app-signup-minified',\n  templateUrl: './signup-minified.page.html',\n  styleUrls: ['./signup-minified.page.scss'],\n  imports: [\n    IonContent,\n    IonInput,\n    IonCol,\n    IonText,\n    HeaderComponent,\n    IonRow,\n    IonItem,\n    IonButton,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TranslateModule,\n  ],\n})\nexport class SignupMinifiedPage implements OnInit {\n  @ViewChild('phoneInput', { read: ElementRef, static: false })\n  phoneInput!: ElementRef<HTMLInputElement>\n  public form: FormGroup\n  public currentCountry: Country | null = null\n  public needsPhoneNumber = false\n  public needsName = false\n  private program: any\n  public pageReady = false\n\n  constructor(\n    private translateService: TranslateService,\n    private modalController: ModalController,\n    private countryService: CountryService,\n    private phoneService: PhoneUtilsService,\n    private router: Router,\n    private changeDetectorRef: ChangeDetectorRef,\n    private cyclistsService: CyclistsService,\n    private storageService: StorageService,\n    private loadingController: LoadingController,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private accountService: AccountService,\n    private toastService: ToastService,\n    private alertController: AlertController,\n    private errorHandler: ErrorHandlerService\n  ) {\n    this.form = new FormGroup({\n      tel: new FormControl('', []),\n      firstName: new FormControl('', []),\n      lastName: new FormControl('', []),\n    })\n  }\n\n  async ionViewWillEnter() {\n    if (Capacitor.isNativePlatform()) {\n      Browser.close()\n    }\n  }\n\n  async ngOnInit() {\n    this.route.queryParams.subscribe(async (params) => {\n      const loader = await this.loadingController.create({\n        message: this.translateService.instant('generic.please_wait'),\n      })\n      await loader.present()\n      if (params['session']) {\n        const sessionData = JSON.parse(decodeURIComponent(params['session']))\n        this.handleSessionData(sessionData)\n        await loader.dismiss()\n      } else {\n        this.toastService.createWithJustMessage(\n          this.translateService.instant('error.signin_error'),\n          ToastType.Error\n        )\n        await this.authService.signOut()\n        await loader.dismiss()\n      }\n    })\n  }\n\n  private async handleSessionData(sessionData: any) {\n    if (\n      sessionData.idToken &&\n      sessionData.accessToken &&\n      sessionData.refreshToken\n    ) {\n      await this.authService.createSessionFromTokens({\n        idToken: sessionData.idToken,\n        accessToken: sessionData.accessToken,\n        refreshToken: sessionData.refreshToken,\n      })\n      const attributes = await fetchUserAttributes()\n      if (\n        attributes.phone_number &&\n        attributes.email &&\n        (attributes.name || (attributes.given_name && attributes.family_name))\n      ) {\n        // Check if we have custom:user\n        if (attributes['custom:user']) {\n          await this.authService.checkAuthStatus(true)\n          this.redirectUserBasedOnValidation()\n        } else {\n          // If we have all required attributes but no custom:user, create the user directly\n          await this.createUser(attributes)\n        }\n      } else {\n        this.initializeForm()\n      }\n    } else {\n      this.toastService.createWithJustMessage(\n        this.translateService.instant('error.signin_error'),\n        ToastType.Error\n      )\n      await this.authService.signOut()\n    }\n  }\n\n  private async initializeForm() {\n    try {\n      const attributes = await fetchUserAttributes()\n      this.needsPhoneNumber = !attributes.phone_number\n\n      // Check if we have either Google's name or Apple's given_name+family_name\n      const hasGoogleName = !!attributes.name\n      const hasAppleNames = !!(attributes.given_name && attributes.family_name)\n      this.needsName = !hasGoogleName && !hasAppleNames\n\n      if (\n        Capacitor.isNativePlatform() &&\n        !this.needsName &&\n        !this.needsPhoneNumber\n      ) {\n        location.reload()\n      }\n      this.pageReady = true\n\n      if (this.needsPhoneNumber) {\n        this.form.get('tel')?.setValidators([Validators.required])\n        const countries = await this.countryService.getCountries()\n        this.currentCountry =\n          (countries as Country[]).find((x: Country) => x.code === 'FR') || null\n\n        if (this.currentCountry && this.phoneInput?.nativeElement) {\n          const placeHolder = await this.phoneService.getPhoneNumberPattern(\n            this.currentCountry\n          )\n          this.phoneInput.nativeElement.placeholder = placeHolder\n        }\n      }\n\n      if (this.needsName) {\n        this.form\n          .get('firstName')\n          ?.setValidators([\n            Validators.required,\n            Validators.pattern(\n              /^[A-Za-z\\u00C0-\\u00FF]+(?:[-\\s][A-Za-z\\u00C0-\\u00FF]+)*$/\n            ),\n          ])\n        this.form\n          .get('lastName')\n          ?.setValidators([\n            Validators.required,\n            Validators.pattern(\n              /^[A-Za-z\\u00C0-\\u00FF]+(?:[-\\s][A-Za-z\\u00C0-\\u00FF]+)*$/\n            ),\n          ])\n      }\n\n      // Retrieve program from storage\n      this.program = await this.storageService.get('program')\n\n      this.form.updateValueAndValidity()\n      this.changeDetectorRef.detectChanges()\n    } catch (err) {\n      this.errorHandler.handleError(err)\n    }\n  }\n\n  public async openCountryPage() {\n    const modal = await this.modalController.create({\n      component: CountriesComponent,\n      componentProps: { currentPosition: 'FR' },\n      initialBreakpoint: 0.75,\n      breakpoints: [0, 0.75],\n    })\n\n    modal.onDidDismiss().then(async (data) => {\n      if (data?.data?.selectedCountry) {\n        this.currentCountry = data.data.selectedCountry\n        this.form.controls['tel'].setValue('')\n\n        if (this.currentCountry) {\n          const placeHolder = await this.phoneService.getPhoneNumberPattern(\n            this.currentCountry\n          )\n          this.phoneInput.nativeElement.placeholder = placeHolder\n        }\n      }\n    })\n\n    await modal.present()\n  }\n\n  public changePhoneNumber(event: Event) {\n    const inputElement = event.target as HTMLInputElement\n    const inputValue = inputElement.value\n\n    if (this.currentCountry) {\n      const numOutput = this.phoneService.formatPhoneNumber(\n        inputValue,\n        this.currentCountry\n      )\n      inputElement.value = inputValue.startsWith('0')\n        ? inputValue.substring(1)\n        : numOutput\n    }\n  }\n\n  public async createUser(attributes?: any) {\n    if (this.form.valid) {\n      const loading = await this.loadingController.create({\n        message: this.translateService.instant('generic.please_wait'),\n      })\n      await loading.present()\n\n      try {\n        // If attributes are not passed, fetch them\n        if (!attributes) {\n          attributes = await fetchUserAttributes()\n        }\n\n        const userAttributes: { phone_number?: string; name?: string } = {}\n\n        if (this.needsPhoneNumber) {\n          userAttributes.phone_number =\n            this.currentCountry?.dial_code +\n            this.form.value.tel.replace(/[(),\\-,\\s]/g, '').replace(/^0+/, '')\n        }\n\n        if (this.needsName) {\n          userAttributes.name =\n            `${this.form.value.firstName} ${this.form.value.lastName}`.trim()\n        }\n\n        // Get name from either Google's name or Apple's given_name+family_name\n        let fullName = attributes.name\n        if (!fullName && attributes.given_name && attributes.family_name) {\n          fullName = `${attributes.given_name} ${attributes.family_name}`.trim()\n        }\n        if (this.needsName) {\n          fullName =\n            `${this.form.value.firstName} ${this.form.value.lastName}`.trim()\n        }\n\n        // Create cyclist using CyclistsService\n        await firstValueFrom(\n          this.cyclistsService.createCyclist({\n            program: environment.program,\n            body: {\n              email: this.ensureNonEmptyString(attributes.email, 'Email'),\n              cognito: this.ensureNonEmptyString(attributes.sub, 'Cognito ID'),\n              name: this.ensureNonEmptyString(fullName, 'Name'),\n              phone_number: this.ensureNonEmptyString(\n                attributes.phone_number || userAttributes.phone_number,\n                'Phone number'\n              ),\n              role: 'cyclist',\n              program: environment.program,\n            },\n          })\n        )\n        await this.authService.checkAuthStatus(true)\n        await loading.dismiss()\n        this.redirectUserBasedOnValidation()\n      } catch (error: any) {\n        await loading.dismiss()\n        if (error.error.title === 'phone_number_already_used') {\n          await this.presentPhoneNumberAlreadyExistAlert()\n        } else {\n          this.presentGeneralErrorAlert(error)\n        }\n      }\n    }\n  }\n\n  private async presentPhoneNumberAlreadyExistAlert() {\n    const phoneNumber =\n      this.currentCountry?.dial_code +\n      this.form.value.tel.replace(/[(),\\-,\\s]/g, '').replace(/^0+/, '')\n\n    const alert = await this.alertController.create({\n      header: this.translateService.instant('auth.existing_account.title'),\n      message: this.translateService.instant('auth.existing_account.message'),\n      buttons: [\n        {\n          text: this.translateService.instant(\n            'auth.existing_account.forgot_password'\n          ),\n          handler: async () => {\n            try {\n              await deleteUser()\n              this.router.navigate(['/enter-phone'])\n            } catch (error) {\n              await this.authService.signOut()\n              this.router.navigate(['/enter-phone'])\n              throw error\n            }\n          },\n        },\n        {\n          text: this.translateService.instant('auth.existing_account.signin'),\n          handler: async () => {\n            try {\n              await deleteUser()\n              this.router.navigate(['/signin'], {\n                queryParams: { phone: phoneNumber },\n              })\n            } catch (error) {\n              await this.authService.signOut()\n              this.router.navigate(['/signin'], {\n                queryParams: { phone: phoneNumber },\n              })\n              throw error\n            }\n          },\n        },\n      ],\n    })\n    await alert.present()\n  }\n\n  private async presentGeneralErrorAlert(error: any) {\n    this.errorHandler.handleError(error)\n    // Reset the form fields that caused the error\n    if (this.needsPhoneNumber) {\n      this.form.get('tel')?.reset()\n    }\n    if (this.needsName) {\n      this.form.get('firstName')?.reset()\n      this.form.get('lastName')?.reset()\n    }\n\n    const alert = await this.alertController.create({\n      header: this.translateService.instant('generic.error'),\n      message: this.translateService.instant('generic.what_to_do'),\n      buttons: [\n        {\n          text: this.translateService.instant('generic.close'),\n          role: 'cancel',\n        },\n        {\n          text: this.translateService.instant('generic.go_to_home'),\n          handler: async () => {\n            try {\n              await deleteUser()\n              await this.authService.signOut()\n              this.router.navigate(['/signin'])\n            } catch (err) {\n              console.error('Error during cleanup:', err)\n              await this.authService.signOut()\n              this.router.navigate(['/signin'])\n            }\n          },\n        },\n      ],\n    })\n    await alert.present()\n  }\n\n  private ensureNonEmptyString(value: any, fieldName: string): string {\n    if (value == null || value === '') {\n      throw new Error(`${fieldName} is required but was not provided`)\n    }\n    return String(value)\n  }\n\n  redirectUserBasedOnValidation() {\n    const cyclistState = this.accountService.cyclistState()\n    // Handle external users first - role takes priority\n    if (\n      'cyclist' in cyclistState &&\n      (cyclistState.cyclist.role == 'guest' ||\n        cyclistState.cyclist.registrations?.data?.[0]?.role == 'guest')\n    ) {\n      this.router.navigate(['/verify-phone'])\n      return\n    }\n\n    // Handle regular cyclists based on state\n    if (cyclistState.state === 'active') {\n      this.router.navigate(['/map'])\n    } else if (cyclistState.state === 'unconfirmed') {\n      if (this.accountService.hasMissingPaymentMethodOrCgu()) {\n        this.router.navigate(['/payment-method'])\n      } else {\n        this.router.navigate(['/verify-phone'])\n      }\n    } else {\n      this.router.navigate(['/signin'])\n    }\n  }\n}\n", "<ng-container *ngIf=\"pageReady\">\n  <app-header></app-header>\n  <ion-content class=\"ion-padding\">\n    <form (ngSubmit)=\"createUser()\" [formGroup]=\"form\">\n      <ion-row class=\"ion-justify-content-center\">\n        <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\">\n          <h1>{{ 'signup.complete_profile' | translate }}</h1>\n        </ion-col>\n      </ion-row>\n\n      <ng-container *ngIf=\"needsPhoneNumber\">\n        <ion-row class=\"ion-justify-content-center\">\n          <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\">\n            <ion-item class=\"ion-no-padding\">\n              <div\n                class=\"ecl-phone__container\"\n                *ngIf=\"currentCountry\"\n                (click)=\"openCountryPage()\"\n              >\n                <img [src]=\"currentCountry.img\" />\n                <span>{{ currentCountry.dial_code }}</span>\n              </div>\n              <ion-input\n                #phoneInput\n                placeholder=\"{{ 'generic.phone_number' | translate }}\"\n                type=\"tel\"\n                inputmode=\"tel\"\n                name=\"tel\"\n                formControlName=\"tel\"\n                (ionChange)=\"changePhoneNumber($event)\"\n              ></ion-input>\n            </ion-item>\n            <ion-text\n              color=\"danger\"\n              *ngIf=\"form.get('tel')?.touched && form.get('tel')?.invalid\"\n            >\n              <small *ngIf=\"form.get('tel')?.errors?.['required']\">\n                {{ 'error.phone_required' | translate }}\n              </small>\n            </ion-text>\n          </ion-col>\n        </ion-row>\n      </ng-container>\n\n      <ng-container *ngIf=\"needsName\">\n        <ion-row class=\"ion-justify-content-center\">\n          <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\">\n            <ion-item fill=\"outline\" class=\"ion-no-padding\">\n              <ion-input\n                placeholder=\"{{ 'generic.first_name' | translate }}\"\n                type=\"text\"\n                name=\"firstName\"\n                formControlName=\"firstName\"\n              ></ion-input>\n            </ion-item>\n            <ion-text\n              color=\"danger\"\n              *ngIf=\"form.get('firstName')?.touched && form.get('firstName')?.invalid\"\n            >\n              <small *ngIf=\"form.get('firstName')?.errors?.['required']\">\n                {{ 'error.first_name_required' | translate }}\n              </small>\n            </ion-text>\n          </ion-col>\n        </ion-row>\n        <ion-row class=\"ion-justify-content-center\">\n          <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\">\n            <ion-item fill=\"outline\" class=\"ion-no-padding\">\n              <ion-input\n                placeholder=\"{{ 'generic.last_name' | translate }}\"\n                type=\"text\"\n                name=\"lastName\"\n                formControlName=\"lastName\"\n              ></ion-input>\n            </ion-item>\n            <ion-text\n              color=\"danger\"\n              *ngIf=\"form.get('lastName')?.touched && form.get('lastName')?.invalid\"\n            >\n              <small *ngIf=\"form.get('lastName')?.errors?.['required']\">\n                {{ 'error.last_name_required' | translate }}\n              </small>\n            </ion-text>\n          </ion-col>\n        </ion-row>\n      </ng-container>\n\n      <ion-row class=\"ion-justify-content-center\">\n        <ion-col size=\"12\" size-md=\"6\" size-lg=\"4\">\n          <ion-button\n            type=\"submit\"\n            expand=\"block\"\n            shape=\"round\"\n            [disabled]=\"form.invalid\"\n            class=\"ion-margin-top\"\n          >\n            {{ 'generic.continue' | translate }}\n          </ion-button>\n        </ion-col>\n      </ion-row>\n    </form>\n  </ion-content>\n</ng-container>\n"],
  "mappings": "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",
  "names": []
}
