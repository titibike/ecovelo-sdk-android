{
  "version": 3,
  "sources": ["src/app/pages/account/wallet/wallet.page.ts", "src/app/pages/account/wallet/wallet.page.html"],
  "sourcesContent": ["import { Component, effect, OnInit } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { FormsModule } from '@angular/forms'\nimport {\n  IonContent,\n  IonHeader,\n  IonTitle,\n  IonIcon,\n  IonToolbar,\n  IonItem,\n  IonInput,\n  IonButton,\n  IonList,\n  IonListHeader,\n  IonLabel,\n  IonSkeletonText,\n  IonSpinner,\n  IonRow,\n  IonCol,\n} from '@ionic/angular/standalone'\nimport { HeaderComponent } from 'src/app/components/header/header.component'\nimport { addIcons } from 'ionicons'\nimport { wallet } from 'ionicons/icons'\nimport {\n  WalletService,\n  walletTransactionsState,\n} from 'src/app/services/api-wrappers/wallet.service'\nimport { Subscription } from 'rxjs'\nimport { TranslateModule } from '@ngx-translate/core'\nimport {\n  AccountService,\n  cyclistState,\n} from 'src/app/services/api-wrappers/account.service'\n@Component({\n  selector: 'app-wallet',\n  templateUrl: './wallet.page.html',\n  styleUrls: ['./wallet.page.scss'],\n  imports: [\n    IonContent,\n    IonIcon,\n    IonItem,\n    IonInput,\n    IonButton,\n    TranslateModule,\n    IonList,\n    IonListHeader,\n    IonLabel,\n    CommonModule,\n    FormsModule,\n    HeaderComponent,\n    IonSkeletonText,\n    IonRow,\n    IonCol,\n  ],\n})\nexport class WalletPage implements OnInit {\n  walletState: walletTransactionsState\n  cyclistState: cyclistState = {\n    state: 'unknown',\n    blocked_reasons: ['Unknown account state'],\n  }\n\n  constructor(\n    public walletService: WalletService,\n    private accountService: AccountService\n  ) {\n    addIcons({ wallet })\n    this.walletService.walletState.subscribe((state) => {\n      this.walletState = state\n    })\n    effect(() => {\n      this.cyclistState = this.accountService.cyclistState()\n    })\n  }\n\n  async ngOnInit() {\n    await this.walletService.getTransactions()\n  }\n  formatDate(timestamp: number): string {\n    return new Date(timestamp * 1000).toLocaleDateString()\n  }\n}\n", "<app-header [defaultHref]=\"'/account'\"></app-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-row class=\"ion-justify-content-center\">\n    <ion-col size=\"12\" size-md=\"8\" size-lg=\"6\">\n      @if (cyclistState.state === 'active') {\n      <div class=\"ecl-wallet\">\n        <div class=\"ecl-wallet__item ecl-wallet__item--money\">\n          {{ (-cyclistState.cyclist.registrations!.data![0].wallet!.money! /\n          100).toFixed(2) }}€\n        </div>\n        <div class=\"ecl-wallet__item ecl-wallet__item--icon\">\n          <ion-icon name=\"wallet\"></ion-icon>\n        </div>\n        <div class=\"ecl-wallet__item ecl-wallet__item--time\">\n          {{ (-cyclistState.cyclist.registrations!.data![0].wallet!.time! /\n          60).toFixed( 0 ) }}min\n        </div>\n      </div>\n      } @else if (cyclistState.state === 'unknown') {\n      <ion-skeleton-text\n        [animated]=\"true\"\n        style=\"width: 100%; height: 60px\"\n      ></ion-skeleton-text>\n      }\n      <ion-input\n        type=\"text\"\n        [label]=\"'wallet.promo_code' | translate\"\n        label-placement=\"floating\"\n        [disabled]=\"cyclistState.state === 'unknown'\"\n        color=\"primary\"\n        class=\"ion-margin-top\"\n        fill=\"outline\"\n        mode=\"md\"\n        #promoInput\n      >\n        <ion-button\n          color=\"dark\"\n          slot=\"end\"\n          size=\"small\"\n          [attr.aria-label]=\"'wallet.apply_promo' | translate\"\n          color=\"dark\"\n          shape=\"round\"\n          (click)=\"walletService.applyCodePromo(promoInput.value?.toString() || ''); promoInput.value = '';\"\n        >\n          {{ 'wallet.apply' | translate }}</ion-button\n        ></ion-input\n      >\n      <ion-list>\n        <ion-list-header>\n          <ion-label>{{ 'wallet.transactions' | translate }}</ion-label>\n        </ion-list-header>\n\n        @if (walletState.state === 'loading') { @for (item of [1,2,3,4,5]; track\n        item) {\n        <ion-item>\n          <ion-label>\n            <h2>\n              <ion-skeleton-text\n                [animated]=\"true\"\n                style=\"width: 20%\"\n              ></ion-skeleton-text>\n            </h2>\n            <p>\n              <ion-skeleton-text\n                [animated]=\"true\"\n                style=\"width: 60%\"\n              ></ion-skeleton-text>\n            </p>\n          </ion-label>\n          <ion-label slot=\"end\" class=\"ion-text-end\">\n            <h3>\n              <ion-skeleton-text\n                [animated]=\"true\"\n                style=\"width: 80px\"\n              ></ion-skeleton-text>\n            </h3>\n            <p>\n              <ion-skeleton-text\n                [animated]=\"true\"\n                style=\"width: 40px\"\n              ></ion-skeleton-text>\n            </p>\n          </ion-label>\n        </ion-item>\n        } } @else if (walletState.state === 'success') { @for (transaction of\n        walletState.transactions; track transaction.id) {\n        <ion-item>\n          @if (transaction.money) {\n          <ion-label [color]=\"transaction.money < 0 ? 'success' : 'danger'\">\n            <strong>{{ (-transaction.money / 100).toFixed(2) }}€</strong>\n            <p>\n              {{ 'wallet.transaction.reason.' + transaction.reason | translate\n              }}\n            </p>\n          </ion-label>\n          } @else {\n          <ion-label [color]=\"transaction.time! < 0 ? 'success' : 'danger'\">\n            <strong>{{ (-transaction.time! / 60).toFixed(0) }}min</strong>\n            <p>\n              {{ 'wallet.transaction.reason.' + transaction.reason | translate\n              }}\n            </p>\n          </ion-label>\n          }\n          <ion-label slot=\"end\" class=\"ion-text-end\">\n            <div class=\"transaction-date\">\n              {{ formatDate(transaction.created!) }}\n            </div>\n            <p *ngIf=\"transaction.facture\">#{{ transaction.facture }}</p>\n          </ion-label>\n        </ion-item>\n        } } @else if (walletState.state === 'error') {\n        <ion-item>\n          <ion-label class=\"ion-text-center\"\n            >{{ 'wallet.transactions_error' | translate:{ message:\n            walletState.error.message } }}</ion-label\n          >\n        </ion-item>\n        } @else {\n        <ion-item>\n          <ion-label class=\"ion-text-center\"\n            >{{ 'wallet.no_transactions' | translate }}</ion-label\n          >\n        </ion-item>\n        }\n      </ion-list>\n    </ion-col>\n  </ion-row>\n</ion-content>\n"],
  "mappings": "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",
  "names": []
}
