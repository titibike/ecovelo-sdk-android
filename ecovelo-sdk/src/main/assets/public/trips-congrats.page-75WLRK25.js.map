{
  "version": 3,
  "sources": ["src/app/pages/congrats/trips/trips-congrats.page.ts", "src/app/pages/congrats/trips/trips-congrats.page.html"],
  "sourcesContent": ["import { Component, Input, OnInit } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { FormsModule } from '@angular/forms'\nimport { Router, RouterLink } from '@angular/router'\nimport {\n  IonContent,\n  IonHeader,\n  IonTitle,\n  IonToolbar,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonImg,\n  IonButton,\n} from '@ionic/angular/standalone'\nimport { ListTrip200ResponseAllOfDataInner } from 'src/api-cyclist'\nimport { ConfettiComponent } from 'src/app/components/confetti/confetti.component'\nimport { AppstateService } from 'src/app/services/internal/appstate.service'\nimport { TranslateModule } from '@ngx-translate/core'\nimport { AnimationOptions, LottieComponent } from 'ngx-lottie'\nimport { FormatPinPipe } from 'src/app/pipes/formatPin.pipe'\nimport { FillButtonComponent } from 'src/app/components/fill-button/fill-button.component'\n@Component({\n  selector: 'app-trips-congrats',\n  templateUrl: './trips-congrats.page.html',\n  styleUrls: ['./trips-congrats.page.scss'],\n  imports: [\n    IonContent,\n    CommonModule,\n    FormsModule,\n    ConfettiComponent,\n    TranslateModule,\n    LottieComponent,\n    FormatPinPipe,\n    FillButtonComponent,\n  ],\n})\nexport class TripsCongratsPage implements OnInit {\n  trip?: ListTrip200ResponseAllOfDataInner\n  options: AnimationOptions = {\n    path: '/assets/icon/animated/lock.json',\n  }\n  constructor(public router: Router, private appState: AppstateService) {}\n\n  async ngOnInit() {\n    // Essayer de récupérer le trip depuis la navigation\n    const navigation = await this.router.getCurrentNavigation()\n    if (navigation?.extras?.state && navigation.extras.state['trip']) {\n      this.trip = navigation.extras.state['trip']\n    } else {\n      // Si pas de trip dans la navigation, rediriger vers la map\n      console.warn('No trip data found, redirecting to map')\n      setTimeout(() => {\n        this.router.navigate(['/map'])\n      }, 2000)\n      return\n    }\n  }\n\n  async ionViewWillEnter() {\n    const appState = this.appState.getAppState()\n    if (\n      appState.state === 'fresh_cyclist' ||\n      appState.state === 'regular_cyclist'\n    ) {\n      let tripStarted = (appState.trip_started || 0) + 1\n      switch (true) {\n        case tripStarted == 1:\n          this.appState.setAppState({\n            state: 'fresh_cyclist',\n            trip_started: tripStarted,\n            dring_state: {\n              geolocation_dring:\n                appState.state === 'fresh_cyclist'\n                  ? appState.dring_state.geolocation_dring\n                  : 'not_shown',\n            },\n            push_notifications:\n              appState.state === 'fresh_cyclist'\n                ? appState.push_notifications\n                : 'not_shown',\n          })\n          break\n        case tripStarted >= 2 && tripStarted < 30:\n          this.appState.setAppState({\n            state: 'regular_cyclist',\n            trip_started: tripStarted,\n          })\n          break\n        case tripStarted >= 30:\n          this.appState.setAppState({\n            state: 'passionate_cyclist',\n            trip_started: tripStarted,\n          })\n          break\n        default:\n          break\n      }\n    } else if (appState.state === 'new_cyclist') {\n      this.appState.setAppState({\n        state: 'fresh_cyclist',\n        trip_started: 1,\n        dring_state: {\n          geolocation_dring: appState.dring_state.geolocation_dring,\n        },\n        push_notifications: appState.push_notifications,\n      })\n    }\n  }\n\n  ionViewDidEnter() {\n    setTimeout(() => {\n      this.router.navigate(['/map'])\n    }, 14000)\n  }\n}\n", "<ion-content\n  [fullscreen]=\"true\"\n  color=\"primary\"\n  class=\"ion-text-center ion-justify-content-center ion-align-items-center\"\n>\n  <div class=\"ecl-congrats-modal\">\n    <app-confetti [count]=\"50\"></app-confetti>\n    <ng-lottie [options]=\"options\"></ng-lottie>\n    <h1>{{ 'trips_congrats.lets_go' | translate }}</h1>\n    @if (trip && trip.vehicule_type !== 'scooter') {\n    <p>\n      {{ 'trips_congrats.unlock_code_message' | translate:{ number:\n      trip.vehicule_number || '****' } }}\n    </p>\n    <div class=\"code\">{{ trip.pin || '******' | formatPin }}</div>\n    } @else if (trip && trip.vehicule_type === 'scooter') {\n    <p>{{ 'trips_congrats.scooter_message' | translate }}</p>\n    }\n    <!-- <ion-button\n      color=\"light\"\n      shape=\"round\"\n      [routerLink]=\"['/map']\"\n      class=\"animated-button\"\n    >\n      {{ 'trips_congrats.continue' | translate }}\n    </ion-button> -->\n    <app-fill-button\n      color=\"light\"\n      fill=\"outline\"\n      [animationDuration]=\"14000\"\n      (buttonClick)=\"router.navigate(['/map'])\"\n    >\n      {{ 'vehicle.continue' | translate }}\n    </app-fill-button>\n  </div>\n</ion-content>\n"],
  "mappings": "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",
  "names": []
}
