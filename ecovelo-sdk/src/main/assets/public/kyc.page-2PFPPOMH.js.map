{
  "version": 3,
  "sources": ["src/app/pages/kyc/kyc.page.ts", "src/app/pages/kyc/kyc.page.html"],
  "sourcesContent": ["import {\n  Component,\n  computed,\n  signal,\n  ChangeDetectorRef,\n  effect,\n  ViewChild,\n} from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { Router } from '@angular/router'\nimport {\n  IonContent,\n  IonButton,\n  IonText,\n  IonRow,\n  IonCol,\n  IonBadge,\n  IonLabel,\n  LoadingController,\n  IonIcon,\n  IonItem,\n  IonModal,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonButtons,\n  IonImg,\n} from '@ionic/angular/standalone'\nimport { TranslateModule, TranslateService } from '@ngx-translate/core'\nimport { RouterModule } from '@angular/router'\nimport { addIcons } from 'ionicons'\nimport {\n  checkmarkCircleOutline,\n  closeCircleOutline,\n  timeOutline,\n  cloudUploadOutline,\n  closeOutline,\n  eyeOutline,\n} from 'ionicons/icons'\nimport { HeaderComponent } from 'src/app/components/header/header.component'\nimport {\n  DocumentUploaderComponent,\n  DocumentImage,\n  DocumentSide,\n} from 'src/app/components/document-uploader/document-uploader.component'\nimport {\n  KYCWrapperService,\n  DocumentUploadRequest,\n} from 'src/app/services/api-wrappers/kyc.service'\nimport {\n  AccountService,\n  cyclistState,\n} from 'src/app/services/api-wrappers/account.service'\nimport { SubscriptionProcessService } from 'src/app/services/utils/subscription-process.service'\nimport { ToastService, ToastType } from 'src/app/services/utils/toast.service'\nimport { StorageService } from 'src/app/services/utils/storage.service'\nimport { firstValueFrom } from 'rxjs'\n\nenum RegistrationState {\n  REGISTRATING = 'registrating',\n  REGISTRATED = 'registrated',\n}\n\n@Component({\n  selector: 'app-kyc',\n  templateUrl: './kyc.page.html',\n  styleUrls: ['./kyc.page.scss'],\n  imports: [\n    CommonModule,\n    IonContent,\n    IonButton,\n    IonRow,\n    IonCol,\n    IonItem,\n    TranslateModule,\n    HeaderComponent,\n    DocumentUploaderComponent,\n    IonBadge,\n    IonLabel,\n    IonIcon,\n    RouterModule,\n    IonModal,\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonButtons,\n    IonImg,\n  ],\n})\nexport class KYCPage {\n  @ViewChild('kycImagesModal') kycImagesModal!: IonModal\n\n  documentImages: { [key: string]: DocumentImage } = {}\n  initialDocumentImages: { [key: string]: DocumentImage } = {} // Track initial state\n  next: string | null = null\n  registrationState: RegistrationState = RegistrationState.REGISTRATED\n  cyclistState: cyclistState = {\n    state: 'unknown',\n    blocked_reasons: ['Unknown account state'],\n  }\n  selectedDocumentName: string = ''\n  selectedDocumentImages: { front?: string; back?: string } = {}\n\n  // Get document names for iteration\n  requiredDocuments = computed(() => {\n    return this.kycService\n      .enabledDocumentTypes()\n      .map((doc) => doc.name)\n      .filter((name): name is string => name !== undefined)\n  })\n\n  // Get document statuses for display\n  documentStatuses = computed(() => {\n    const cyclistState = this.accountService.cyclistState()\n    if (!('cyclist' in cyclistState)) return {}\n\n    const enabledDocs = this.requiredDocuments()\n    const statuses: {\n      [key: string]: {\n        status: string\n        color: string\n        rejection_reason?: string\n      }\n    } = {}\n\n    enabledDocs.forEach((docName) => {\n      const cyclistDoc = Object.values(\n        cyclistState.cyclist.kyc_documents || {}\n      ).find((doc: any) => doc.name === docName)\n\n      const status = cyclistDoc?.status || 'not_submitted'\n      let color = 'medium'\n\n      switch (status) {\n        case 'approved':\n          color = 'success'\n          break\n        case 'rejected':\n          color = 'danger'\n          break\n        case 'pending':\n          color = 'primary'\n          break\n        default:\n          color = 'medium'\n      }\n\n      statuses[docName] = {\n        status,\n        color,\n        rejection_reason: cyclistDoc?.rejection_reason,\n      }\n    })\n\n    return statuses\n  })\n\n  // Get existing document images\n  existingDocumentImages = computed(() => {\n    const cyclistState = this.accountService.cyclistState()\n    if (!('cyclist' in cyclistState)) return {}\n\n    const enabledDocs = this.requiredDocuments()\n    const images: { [key: string]: { front?: string; back?: string } } = {}\n\n    enabledDocs.forEach((docName) => {\n      const cyclistDoc = Object.values(\n        cyclistState.cyclist.kyc_documents || {}\n      ).find((doc: any) => doc.name === docName)\n\n      if (cyclistDoc?.files) {\n        images[docName] = {\n          front: cyclistDoc.files.frontside?.file_url || undefined,\n          back: cyclistDoc.files.backside?.file_url || undefined,\n        }\n      }\n    })\n\n    return images\n  })\n\n  constructor(\n    private kycService: KYCWrapperService,\n    private accountService: AccountService,\n    private router: Router,\n    private toastService: ToastService,\n    private translate: TranslateService,\n    private loadingCtrl: LoadingController,\n    private subscriptionProcess: SubscriptionProcessService,\n    private cdr: ChangeDetectorRef\n  ) {\n    addIcons({\n      checkmarkCircle: checkmarkCircleOutline,\n      closeCircle: closeCircleOutline,\n      timeOutline: timeOutline,\n      cloudUploadOutline: cloudUploadOutline,\n      closeOutline: closeOutline,\n      eyeOutline: eyeOutline,\n    })\n    effect(() => {\n      this.cyclistState = this.accountService.cyclistState()\n      if (this.cyclistState.state === 'unknown') {\n        // Wait a bit to allow data to load before redirecting\n        setTimeout(() => {\n          const currentState = this.accountService.cyclistState()\n\n          if (currentState.state === 'unknown') {\n            this.router.navigate(['/map'])\n          }\n        }, 2000) // Wait 2 seconds\n      }\n    })\n  }\n\n  async ionViewWillEnter() {\n    const queryParams = new URLSearchParams(window.location.search)\n    this.next = queryParams.get('next')\n    this.registrationState =\n      queryParams.get('onboarding') === 'true'\n        ? RegistrationState.REGISTRATING\n        : RegistrationState.REGISTRATED\n    this.documentImages = {}\n    this.initialDocumentImages = {}\n\n    if (this.requiredDocuments().length === 0) {\n      this.toastService.createWithJustMessage(\n        this.translate.instant('kyc.no_documents_available'),\n        ToastType.Warning\n      )\n    }\n  }\n\n  onDocumentImagesChange(documentName: string, images: DocumentImage) {\n    this.documentImages[documentName] = images\n  }\n\n  openKycImagesModal(documentName: string) {\n    this.selectedDocumentName = documentName\n    this.selectedDocumentImages =\n      this.existingDocumentImages()[documentName] || {}\n    this.kycImagesModal.present()\n  }\n\n  async submitDocuments() {\n    const documentsToSubmit = this.requiredDocuments()\n\n    if (documentsToSubmit.length > 0) {\n      let loading: HTMLIonLoadingElement | null = null\n\n      loading = await this.loadingCtrl.create({\n        message: this.translate.instant('kyc.uploading_documents'),\n      })\n      await loading.present()\n\n      // Collect all documents that need to be uploaded\n      const documentsToUpload: DocumentUploadRequest[] = []\n\n      for (const [documentType, currentImages] of Object.entries(\n        this.documentImages\n      )) {\n        const initialImages = this.initialDocumentImages[documentType] || {}\n\n        // Only upload if images have changed from initial state\n        const frontChanged =\n          currentImages.front_image !== initialImages.front_image\n        const backChanged =\n          currentImages.back_image !== initialImages.back_image\n\n        if (frontChanged || backChanged) {\n          documentsToUpload.push({\n            document_type: documentType,\n            files: {\n              frontside: frontChanged\n                ? currentImages.front_image || undefined\n                : undefined,\n              backside: backChanged\n                ? currentImages.back_image || undefined\n                : undefined,\n            },\n          })\n        }\n      }\n\n      // Upload all documents in sequence\n      for (const document of documentsToUpload) {\n        await this.kycService.uploadDocument(document)\n      }\n\n      // Only reload cyclist data once after all uploads are complete\n      await this.accountService.loadCyclist()\n      await this.handlePostUploadNavigation()\n      await loading.dismiss()\n    } else if (this.next) {\n      await this.router.navigate([this.next])\n    }\n  }\n\n  async handlePostUploadNavigation() {\n    if (this.registrationState === RegistrationState.REGISTRATING) {\n      const process = await firstValueFrom(\n        this.subscriptionProcess.getCurrentProcess()\n      )\n\n      const hasSupportingDocuments =\n        process?.forfait?.supporting_documents &&\n        process?.forfait?.supporting_documents?.length > 0\n\n      if (hasSupportingDocuments) {\n        await this.subscriptionProcess.updateStep('documents')\n        await this.router.navigate(['/supporting-documents'], {\n          queryParams: { next: '/verify-phone' },\n          replaceUrl: true,\n        })\n      } else {\n        await this.subscriptionProcess.updateStep('phone')\n        await this.router.navigate(['/verify-phone'])\n      }\n    } else {\n      await this.router.navigate(['/map'])\n    }\n  }\n\n  isComplete(): boolean {\n    const documentsToSubmit = this.requiredDocuments()\n    const statuses = this.documentStatuses()\n\n    // If no documents are required at all, enable button\n    if (documentsToSubmit.length === 0) {\n      return true\n    }\n\n    // Get all documents that need to be submitted (missing, rejected, or not_submitted)\n    const documentsNeedingSubmission = documentsToSubmit.filter((doc) => {\n      const status = statuses[doc]?.status\n      return (\n        status === 'missing' ||\n        status === 'rejected' ||\n        status === 'not_submitted'\n      )\n    })\n\n    // If no documents need submission, disable button\n    if (documentsNeedingSubmission.length === 0) {\n      return false\n    }\n\n    // Check that ALL documents needing submission have at least one side filled\n    const allDocumentsHaveFiles = documentsNeedingSubmission.every((doc) => {\n      const docImages = this.documentImages[doc]\n      return docImages && (docImages.front_image || docImages.back_image)\n    })\n\n    // Check if we have new files to upload\n    const hasNewFiles = this.hasNewFilesToUpload()\n\n    // Enable button only if ALL required documents have files AND there are new files to upload\n    return allDocumentsHaveFiles && hasNewFiles\n  }\n\n  private hasNewFilesToUpload(): boolean {\n    const result = Object.entries(this.documentImages).some(\n      ([docName, currentImages]) => {\n        const initialImages = this.initialDocumentImages[docName] || {}\n\n        const frontChanged =\n          currentImages.front_image !== initialImages.front_image\n        const backChanged =\n          currentImages.back_image !== initialImages.back_image\n\n        return frontChanged || backChanged\n      }\n    )\n    return result\n  }\n\n  shouldShowSubmitButton(): boolean {\n    const documentsToSubmit = this.requiredDocuments()\n    const statuses = this.documentStatuses()\n\n    // If no documents are required, don't show the button\n    if (documentsToSubmit.length === 0) {\n      return false\n    }\n\n    // Show button if there are documents that can be submitted (missing, rejected, or not_submitted)\n    return documentsToSubmit.some((doc) => {\n      const status = statuses[doc]?.status\n      return (\n        status === 'missing' ||\n        status === 'rejected' ||\n        status === 'not_submitted'\n      )\n    })\n  }\n\n  getSubmitButtonText(): string {\n    const documentsToSubmit = this.requiredDocuments()\n    const statuses = this.documentStatuses()\n\n    // Check if we have any rejected documents\n    const hasRejectedDocs = documentsToSubmit.some((doc) => {\n      const status = statuses[doc]?.status\n      return status === 'rejected'\n    })\n\n    if (hasRejectedDocs) {\n      return 'kyc.resubmit_documents'\n    }\n\n    return 'kyc.submit_documents'\n  }\n}\n", "<app-header [defaultHref]=\"'/account'\"></app-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-row class=\"ion-padding-horizontal\">\n    <ion-col>\n      <h2>{{ 'kyc.subtitle' | translate }}</h2>\n      <p>{{ 'kyc.description' | translate }}</p>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"ion-padding-horizontal\">\n    <ion-col>\n      <div *ngFor=\"let docName of requiredDocuments()\">\n        <ion-item\n          *ngIf=\"documentStatuses()[docName].status === 'pending' || \n                   documentStatuses()[docName].status === 'approved' || \n                   documentStatuses()[docName].status === 'rejected'\"\n          (click)=\"(existingDocumentImages()[docName].front || existingDocumentImages()[docName].back) && openKycImagesModal(docName)\"\n        >\n          <ion-label>\n            <h2>{{ 'documents.kyc.' + docName | translate }}</h2>\n            <p\n              *ngIf=\"documentStatuses()[docName].status === 'rejected' && documentStatuses()[docName].rejection_reason\"\n            >\n              <strong>{{ 'kyc.rejection_reason' | translate }}:</strong>\n              {{ documentStatuses()[docName].rejection_reason }}\n            </p>\n            <ion-badge\n              [color]=\"documentStatuses()[docName].color\"\n              class=\"ion-no-margin\"\n            >\n              {{ 'kyc.status.' + documentStatuses()[docName].status | translate\n              }}\n            </ion-badge>\n          </ion-label>\n          <ion-button\n            *ngIf=\"existingDocumentImages()[docName].front || existingDocumentImages()[docName].back\"\n            fill=\"clear\"\n            slot=\"end\"\n            (click)=\"openKycImagesModal(docName); $event.stopPropagation()\"\n          >\n            <ion-icon name=\"eye-outline\"></ion-icon>\n          </ion-button>\n        </ion-item>\n        <app-document-uploader\n          *ngIf=\"documentStatuses()[docName].status !== 'pending' && \n                 documentStatuses()[docName].status !== 'approved'\"\n          [documentName]=\"docName\"\n          [documentImages]=\"documentImages[docName] || {}\"\n          [documentStatus]=\"documentStatuses()[docName].status\"\n          (documentUpdate)=\"onDocumentImagesChange(docName, $event)\"\n        ></app-document-uploader>\n      </div>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"ion-padding\" *ngIf=\"shouldShowSubmitButton()\">\n    <ion-col>\n      <ion-button\n        expand=\"block\"\n        (click)=\"submitDocuments()\"\n        [disabled]=\"!isComplete()\"\n      >\n        {{ getSubmitButtonText() | translate }}\n      </ion-button>\n    </ion-col>\n  </ion-row>\n</ion-content>\n\n<!-- KYC Images Modal -->\n<ion-modal #kycImagesModal>\n  <ng-template>\n    <ion-header>\n      <ion-toolbar>\n        <ion-title\n          >{{ 'documents.kyc.' + selectedDocumentName | translate }}</ion-title\n        >\n        <ion-buttons slot=\"end\">\n          <ion-button\n            (click)=\"kycImagesModal.dismiss()\"\n            fill=\"clear\"\n            color=\"dark\"\n          >\n            <ion-icon name=\"close-outline\"></ion-icon>\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n    </ion-header>\n    <ion-content class=\"ion-padding\">\n      <!-- Front side -->\n      <div *ngIf=\"selectedDocumentImages.front\">\n        <h3>{{ 'documents.front_side' | translate }}</h3>\n        <ion-img\n          [src]=\"selectedDocumentImages.front\"\n          [alt]=\"'documents.front_side' | translate\"\n          class=\"ion-margin-bottom\"\n        ></ion-img>\n      </div>\n\n      <!-- Back side -->\n      <div *ngIf=\"selectedDocumentImages.back\">\n        <h3>{{ 'documents.back_side' | translate }}</h3>\n        <ion-img\n          [src]=\"selectedDocumentImages.back\"\n          [alt]=\"'documents.back_side' | translate\"\n          class=\"ion-margin-bottom\"\n        ></ion-img>\n      </div>\n\n      <!-- No images message -->\n      <div\n        *ngIf=\"!selectedDocumentImages.front && !selectedDocumentImages.back\"\n        class=\"ion-text-center\"\n      >\n        <p>{{ 'kyc.no_images_available' | translate }}</p>\n      </div>\n    </ion-content>\n  </ng-template>\n</ion-modal>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqBY,IAAA,yBAAA,GAAA,GAAA,EAEC,GAAA,QAAA;AACS,IAAA,iBAAA,CAAA;;AAAyC,IAAA,uBAAA;AACjD,IAAA,iBAAA,CAAA;AACF,IAAA,uBAAA;;;;;AAFU,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,IAAA,sBAAA,GAAA,GAAA,sBAAA,GAAA,GAAA;AACR,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,kBAAA,GAAA;;;;;;AAUJ,IAAA,yBAAA,GAAA,cAAA,EAAA;AAIE,IAAA,qBAAA,SAAA,SAAA,4EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,aAAA,wBAAA,CAAA,EAAA;AAAA,YAAA,SAAA,wBAAA;AAAS,aAAA,mBAAA,UAAA;AAA2B,aAAA,sBAAE,OAAA,gBAAA,CAAwB;IAAA,CAAA;AAE9D,IAAA,oBAAA,GAAA,YAAA,EAAA;AACF,IAAA,uBAAA;;;;;;AA7BF,IAAA,yBAAA,GAAA,YAAA,CAAA;AAIE,IAAA,qBAAA,SAAA,SAAA,+DAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,aAAA,wBAAA,EAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,uBAAU,OAAA,uBAAA,EAAwB,UAAA,EAAA,SAAmB,OAAA,uBAAA,EAAwB,UAAA,EAAA,SAAmB,OAAA,mBAAA,UAAA,CAA2B;IAAA,CAAA;AAE3H,IAAA,yBAAA,GAAA,WAAA,EAAW,GAAA,IAAA;AACL,IAAA,iBAAA,CAAA;;AAA4C,IAAA,uBAAA;AAChD,IAAA,qBAAA,GAAA,wCAAA,GAAA,GAAA,KAAA,CAAA;AAMA,IAAA,yBAAA,GAAA,aAAA,EAAA;AAIE,IAAA,iBAAA,CAAA;;AAEF,IAAA,uBAAA,EAAY;AAEd,IAAA,qBAAA,GAAA,iDAAA,GAAA,GAAA,cAAA,EAAA;AAQF,IAAA,uBAAA;;;;;AAvBQ,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,mBAAA,UAAA,CAAA;AAED,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,cAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,gBAAA;AAMD,IAAA,oBAAA;AAAA,IAAA,qBAAA,SAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,KAAA;AAGA,IAAA,oBAAA;AAAA,IAAA,6BAAA,KAAA,sBAAA,GAAA,GAAA,gBAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,MAAA,GAAA,GAAA;AAKD,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,uBAAA,EAAA,UAAA,EAAA,SAAA,OAAA,uBAAA,EAAA,UAAA,EAAA,IAAA;;;;;;AAQL,IAAA,yBAAA,GAAA,yBAAA,EAAA;AAME,IAAA,qBAAA,kBAAA,SAAA,gGAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,aAAA,wBAAA,EAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAkB,OAAA,uBAAA,YAAA,MAAA,CAAuC;IAAA,CAAA;AAC1D,IAAA,uBAAA;;;;;AAJC,IAAA,qBAAA,gBAAA,UAAA,EAAwB,kBAAA,OAAA,eAAA,UAAA,KAAA,0BAAA,GAAA,GAAA,CAAA,EACwB,kBAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,MAAA;;;;;AApCpD,IAAA,yBAAA,GAAA,KAAA;AACE,IAAA,qBAAA,GAAA,oCAAA,IAAA,GAAA,YAAA,CAAA,EAKC,GAAA,iDAAA,GAAA,GAAA,yBAAA,CAAA;AAkCH,IAAA,uBAAA;;;;;AAtCK,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,aAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,cAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,UAAA;AA+BA,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,aAAA,OAAA,iBAAA,EAAA,UAAA,EAAA,WAAA,UAAA;;;;;;AAWT,IAAA,yBAAA,GAAA,WAAA,EAAA,EAA8D,GAAA,SAAA,EACnD,GAAA,cAAA,EAAA;AAGL,IAAA,qBAAA,SAAA,SAAA,0DAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,gBAAA,CAAiB;IAAA,CAAA;AAG1B,IAAA,iBAAA,CAAA;;AACF,IAAA,uBAAA,EAAa,EACL;;;;AAJN,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,YAAA,CAAA,OAAA,WAAA,CAAA;AAEA,IAAA,oBAAA;AAAA,IAAA,6BAAA,KAAA,sBAAA,GAAA,GAAA,OAAA,oBAAA,CAAA,GAAA,GAAA;;;;;AA2BF,IAAA,yBAAA,GAAA,KAAA,EAA0C,GAAA,IAAA;AACpC,IAAA,iBAAA,CAAA;;AAAwC,IAAA,uBAAA;AAC5C,IAAA,oBAAA,GAAA,WAAA,EAAA;;AAKF,IAAA,uBAAA;;;;AANM,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,sBAAA,CAAA;AAEF,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,OAAA,OAAA,uBAAA,KAAA,EAAoC,OAAA,sBAAA,GAAA,GAAA,sBAAA,CAAA;;;;;AAOxC,IAAA,yBAAA,GAAA,KAAA,EAAyC,GAAA,IAAA;AACnC,IAAA,iBAAA,CAAA;;AAAuC,IAAA,uBAAA;AAC3C,IAAA,oBAAA,GAAA,WAAA,EAAA;;AAKF,IAAA,uBAAA;;;;AANM,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,qBAAA,CAAA;AAEF,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,OAAA,OAAA,uBAAA,IAAA,EAAmC,OAAA,sBAAA,GAAA,GAAA,qBAAA,CAAA;;;;;AAOvC,IAAA,yBAAA,GAAA,OAAA,EAAA,EAGC,GAAA,GAAA;AACI,IAAA,iBAAA,CAAA;;AAA2C,IAAA,uBAAA,EAAI;;;AAA/C,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,yBAAA,CAAA;;;;;;AA1CP,IAAA,yBAAA,GAAA,YAAA,EAAY,GAAA,aAAA,EACG,GAAA,WAAA;AAER,IAAA,iBAAA,CAAA;;AAAyD,IAAA,uBAAA;AAE5D,IAAA,yBAAA,GAAA,eAAA,EAAA,EAAwB,GAAA,cAAA,EAAA;AAEpB,IAAA,qBAAA,SAAA,SAAA,8DAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,MAAA,wBAAA;AAAA,YAAA,oBAAA,sBAAA,EAAA;AAAA,aAAA,sBAAS,kBAAA,QAAA,CAAwB;IAAA,CAAA;AAIjC,IAAA,oBAAA,GAAA,YAAA,EAAA;AACF,IAAA,uBAAA,EAAa,EACD,EACF;AAEhB,IAAA,yBAAA,GAAA,eAAA,EAAA;AAEE,IAAA,qBAAA,GAAA,uCAAA,GAAA,GAAA,OAAA,CAAA,EAA0C,IAAA,wCAAA,GAAA,GAAA,OAAA,CAAA,EAUD,IAAA,wCAAA,GAAA,GAAA,OAAA,EAAA;AAgB3C,IAAA,uBAAA;;;;AAzCO,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,mBAAA,OAAA,oBAAA,CAAA;AAeC,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,uBAAA,KAAA;AAUA,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,uBAAA,IAAA;AAWH,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,CAAA,OAAA,uBAAA,SAAA,CAAA,OAAA,uBAAA,IAAA;;;ADrDT,IAAK;CAAL,SAAKA,oBAAiB;AACpB,EAAAA,mBAAA,cAAA,IAAA;AACA,EAAAA,mBAAA,aAAA,IAAA;AACF,GAHK,sBAAA,oBAAiB,CAAA,EAAA;AA+BhB,IAAO,WAAP,MAAO,SAAO;EA4FlB,YACU,YACA,gBACA,QACA,cACA,WACA,aACA,qBACA,KAAsB;AAPtB,SAAA,aAAA;AACA,SAAA,iBAAA;AACA,SAAA,SAAA;AACA,SAAA,eAAA;AACA,SAAA,YAAA;AACA,SAAA,cAAA;AACA,SAAA,sBAAA;AACA,SAAA,MAAA;AAjGV,SAAA,iBAAmD,CAAA;AACnD,SAAA,wBAA0D,CAAA;AAC1D,SAAA,OAAsB;AACtB,SAAA,oBAAuC,kBAAkB;AACzD,SAAA,eAA6B;MAC3B,OAAO;MACP,iBAAiB,CAAC,uBAAuB;;AAE3C,SAAA,uBAA+B;AAC/B,SAAA,yBAA4D,CAAA;AAG5D,SAAA,oBAAoB,SAAS,MAAK;AAChC,aAAO,KAAK,WACT,qBAAoB,EACpB,IAAI,CAAC,QAAQ,IAAI,IAAI,EACrB,OAAO,CAAC,SAAyB,SAAS,MAAS;IACxD,CAAC;AAGD,SAAA,mBAAmB,SAAS,MAAK;AAC/B,YAAM,eAAe,KAAK,eAAe,aAAY;AACrD,UAAI,EAAE,aAAa;AAAe,eAAO,CAAA;AAEzC,YAAM,cAAc,KAAK,kBAAiB;AAC1C,YAAM,WAMF,CAAA;AAEJ,kBAAY,QAAQ,CAAC,YAAW;AAC9B,cAAM,aAAa,OAAO,OACxB,aAAa,QAAQ,iBAAiB,CAAA,CAAE,EACxC,KAAK,CAAC,QAAa,IAAI,SAAS,OAAO;AAEzC,cAAM,UAAS,yCAAY,WAAU;AACrC,YAAI,QAAQ;AAEZ,gBAAQ,QAAQ;UACd,KAAK;AACH,oBAAQ;AACR;UACF,KAAK;AACH,oBAAQ;AACR;UACF,KAAK;AACH,oBAAQ;AACR;UACF;AACE,oBAAQ;QACZ;AAEA,iBAAS,OAAO,IAAI;UAClB;UACA;UACA,kBAAkB,yCAAY;;MAElC,CAAC;AAED,aAAO;IACT,CAAC;AAGD,SAAA,yBAAyB,SAAS,MAAK;AACrC,YAAM,eAAe,KAAK,eAAe,aAAY;AACrD,UAAI,EAAE,aAAa;AAAe,eAAO,CAAA;AAEzC,YAAM,cAAc,KAAK,kBAAiB;AAC1C,YAAM,SAA+D,CAAA;AAErE,kBAAY,QAAQ,CAAC,YAAW;AArKpC;AAsKM,cAAM,aAAa,OAAO,OACxB,aAAa,QAAQ,iBAAiB,CAAA,CAAE,EACxC,KAAK,CAAC,QAAa,IAAI,SAAS,OAAO;AAEzC,YAAI,yCAAY,OAAO;AACrB,iBAAO,OAAO,IAAI;YAChB,SAAO,gBAAW,MAAM,cAAjB,mBAA4B,aAAY;YAC/C,QAAM,gBAAW,MAAM,aAAjB,mBAA2B,aAAY;;QAEjD;MACF,CAAC;AAED,aAAO;IACT,CAAC;AAYC,aAAS;MACP,iBAAiB;MACjB,aAAa;MACb;MACA;MACA;MACA;KACD;AACD,WAAO,MAAK;AACV,WAAK,eAAe,KAAK,eAAe,aAAY;AACpD,UAAI,KAAK,aAAa,UAAU,WAAW;AAEzC,mBAAW,MAAK;AACd,gBAAM,eAAe,KAAK,eAAe,aAAY;AAErD,cAAI,aAAa,UAAU,WAAW;AACpC,iBAAK,OAAO,SAAS,CAAC,MAAM,CAAC;UAC/B;QACF,GAAG,GAAI;MACT;IACF,CAAC;EACH;EAEM,mBAAgB;;AACpB,YAAM,cAAc,IAAI,gBAAgB,OAAO,SAAS,MAAM;AAC9D,WAAK,OAAO,YAAY,IAAI,MAAM;AAClC,WAAK,oBACH,YAAY,IAAI,YAAY,MAAM,SAC9B,kBAAkB,eAClB,kBAAkB;AACxB,WAAK,iBAAiB,CAAA;AACtB,WAAK,wBAAwB,CAAA;AAE7B,UAAI,KAAK,kBAAiB,EAAG,WAAW,GAAG;AACzC,aAAK,aAAa,sBAChB,KAAK,UAAU,QAAQ,4BAA4B,GACnD,UAAU,OAAO;MAErB;IACF;;EAEA,uBAAuB,cAAsB,QAAqB;AAChE,SAAK,eAAe,YAAY,IAAI;EACtC;EAEA,mBAAmB,cAAoB;AACrC,SAAK,uBAAuB;AAC5B,SAAK,yBACH,KAAK,uBAAsB,EAAG,YAAY,KAAK,CAAA;AACjD,SAAK,eAAe,QAAO;EAC7B;EAEM,kBAAe;;AACnB,YAAM,oBAAoB,KAAK,kBAAiB;AAEhD,UAAI,kBAAkB,SAAS,GAAG;AAChC,YAAI,UAAwC;AAE5C,kBAAU,MAAM,KAAK,YAAY,OAAO;UACtC,SAAS,KAAK,UAAU,QAAQ,yBAAyB;SAC1D;AACD,cAAM,QAAQ,QAAO;AAGrB,cAAM,oBAA6C,CAAA;AAEnD,mBAAW,CAAC,cAAc,aAAa,KAAK,OAAO,QACjD,KAAK,cAAc,GAClB;AACD,gBAAM,gBAAgB,KAAK,sBAAsB,YAAY,KAAK,CAAA;AAGlE,gBAAM,eACJ,cAAc,gBAAgB,cAAc;AAC9C,gBAAM,cACJ,cAAc,eAAe,cAAc;AAE7C,cAAI,gBAAgB,aAAa;AAC/B,8BAAkB,KAAK;cACrB,eAAe;cACf,OAAO;gBACL,WAAW,eACP,cAAc,eAAe,SAC7B;gBACJ,UAAU,cACN,cAAc,cAAc,SAC5B;;aAEP;UACH;QACF;AAGA,mBAAW,YAAY,mBAAmB;AACxC,gBAAM,KAAK,WAAW,eAAe,QAAQ;QAC/C;AAGA,cAAM,KAAK,eAAe,YAAW;AACrC,cAAM,KAAK,2BAA0B;AACrC,cAAM,QAAQ,QAAO;MACvB,WAAW,KAAK,MAAM;AACpB,cAAM,KAAK,OAAO,SAAS,CAAC,KAAK,IAAI,CAAC;MACxC;IACF;;EAEM,6BAA0B;;AAzSlC;AA0SI,UAAI,KAAK,sBAAsB,kBAAkB,cAAc;AAC7D,cAAM,UAAU,MAAM,eACpB,KAAK,oBAAoB,kBAAiB,CAAE;AAG9C,cAAM,2BACJ,wCAAS,YAAT,mBAAkB,2BAClB,8CAAS,YAAT,mBAAkB,yBAAlB,mBAAwC,UAAS;AAEnD,YAAI,wBAAwB;AAC1B,gBAAM,KAAK,oBAAoB,WAAW,WAAW;AACrD,gBAAM,KAAK,OAAO,SAAS,CAAC,uBAAuB,GAAG;YACpD,aAAa,EAAE,MAAM,gBAAe;YACpC,YAAY;WACb;QACH,OAAO;AACL,gBAAM,KAAK,oBAAoB,WAAW,OAAO;AACjD,gBAAM,KAAK,OAAO,SAAS,CAAC,eAAe,CAAC;QAC9C;MACF,OAAO;AACL,cAAM,KAAK,OAAO,SAAS,CAAC,MAAM,CAAC;MACrC;IACF;;EAEA,aAAU;AACR,UAAM,oBAAoB,KAAK,kBAAiB;AAChD,UAAM,WAAW,KAAK,iBAAgB;AAGtC,QAAI,kBAAkB,WAAW,GAAG;AAClC,aAAO;IACT;AAGA,UAAM,6BAA6B,kBAAkB,OAAO,CAAC,QAAO;AA5UxE;AA6UM,YAAM,UAAS,cAAS,GAAG,MAAZ,mBAAe;AAC9B,aACE,WAAW,aACX,WAAW,cACX,WAAW;IAEf,CAAC;AAGD,QAAI,2BAA2B,WAAW,GAAG;AAC3C,aAAO;IACT;AAGA,UAAM,wBAAwB,2BAA2B,MAAM,CAAC,QAAO;AACrE,YAAM,YAAY,KAAK,eAAe,GAAG;AACzC,aAAO,cAAc,UAAU,eAAe,UAAU;IAC1D,CAAC;AAGD,UAAM,cAAc,KAAK,oBAAmB;AAG5C,WAAO,yBAAyB;EAClC;EAEQ,sBAAmB;AACzB,UAAM,SAAS,OAAO,QAAQ,KAAK,cAAc,EAAE,KACjD,CAAC,CAAC,SAAS,aAAa,MAAK;AAC3B,YAAM,gBAAgB,KAAK,sBAAsB,OAAO,KAAK,CAAA;AAE7D,YAAM,eACJ,cAAc,gBAAgB,cAAc;AAC9C,YAAM,cACJ,cAAc,eAAe,cAAc;AAE7C,aAAO,gBAAgB;IACzB,CAAC;AAEH,WAAO;EACT;EAEA,yBAAsB;AACpB,UAAM,oBAAoB,KAAK,kBAAiB;AAChD,UAAM,WAAW,KAAK,iBAAgB;AAGtC,QAAI,kBAAkB,WAAW,GAAG;AAClC,aAAO;IACT;AAGA,WAAO,kBAAkB,KAAK,CAAC,QAAO;AAjY1C;AAkYM,YAAM,UAAS,cAAS,GAAG,MAAZ,mBAAe;AAC9B,aACE,WAAW,aACX,WAAW,cACX,WAAW;IAEf,CAAC;EACH;EAEA,sBAAmB;AACjB,UAAM,oBAAoB,KAAK,kBAAiB;AAChD,UAAM,WAAW,KAAK,iBAAgB;AAGtC,UAAM,kBAAkB,kBAAkB,KAAK,CAAC,QAAO;AAhZ3D;AAiZM,YAAM,UAAS,cAAS,GAAG,MAAZ,mBAAe;AAC9B,aAAO,WAAW;IACpB,CAAC;AAED,QAAI,iBAAiB;AACnB,aAAO;IACT;AAEA,WAAO;EACT;;;mCAjUW,UAAO,4BAAA,iBAAA,GAAA,4BAAA,cAAA,GAAA,4BAAA,MAAA,GAAA,4BAAA,YAAA,GAAA,4BAAA,gBAAA,GAAA,4BAAA,iBAAA,GAAA,4BAAA,0BAAA,GAAA,4BAAA,iBAAA,CAAA;AAAA;yEAAP,UAAO,WAAA,CAAA,CAAA,SAAA,CAAA,GAAA,WAAA,SAAA,cAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;;;;;;;;;ACzFpB,IAAA,oBAAA,GAAA,cAAA,CAAA;AAEA,IAAA,yBAAA,GAAA,eAAA,CAAA,EAAiC,GAAA,WAAA,CAAA,EACS,GAAA,SAAA,EAC7B,GAAA,IAAA;AACH,IAAA,iBAAA,CAAA;;AAAgC,IAAA,uBAAA;AACpC,IAAA,yBAAA,GAAA,GAAA;AAAG,IAAA,iBAAA,CAAA;;AAAmC,IAAA,uBAAA,EAAI,EAClC;AAGZ,IAAA,yBAAA,IAAA,WAAA,CAAA,EAAwC,IAAA,SAAA;AAEpC,IAAA,qBAAA,IAAA,yBAAA,GAAA,GAAA,OAAA,CAAA;AAyCF,IAAA,uBAAA,EAAU;AAGZ,IAAA,qBAAA,IAAA,6BAAA,GAAA,GAAA,WAAA,CAAA;AAWF,IAAA,uBAAA;AAGA,IAAA,yBAAA,IAAA,aAAA,MAAA,CAAA;AACE,IAAA,qBAAA,IAAA,iCAAA,IAAA,GAAA,aAAA;AA+CF,IAAA,uBAAA;;;AAtHY,IAAA,qBAAA,eAAA,UAAA;AAEC,IAAA,oBAAA;AAAA,IAAA,qBAAA,cAAA,IAAA;AAGH,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,cAAA,CAAA;AACD,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,sBAAA,GAAA,GAAA,iBAAA,CAAA;AAMsB,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,WAAA,IAAA,kBAAA,CAAA;AA4CC,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,IAAA,uBAAA,CAAA;;;EDY5B;EAAY;EAAA;EACZ;EACA;EACA;EACA;EACA;EACA;EAAe;EACf;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AAAM,GAAA,eAAA,EAAA,CAAA;AAGJ,IAAO,UAAP;;sEAAO,SAAO,CAAA;UA1BnB;uBACW,WAAS,SAGV;MACP;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;OACD,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,CAAA;6OAG4B,gBAAc,CAAA;UAA1C;WAAU,gBAAgB;;;;6EADhB,SAAO,EAAA,WAAA,WAAA,UAAA,iCAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": ["RegistrationState"]
}
