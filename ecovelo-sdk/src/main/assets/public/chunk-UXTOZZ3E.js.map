{
  "version": 3,
  "sources": ["src/app/services/utils/toast.service.ts", "src/app/services/utils/error-handler.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core'\nimport { ToastController } from '@ionic/angular/standalone'\n\nexport enum ToastType {\n  Info,\n  Success,\n  Warning,\n  Error,\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ToastService {\n  constructor(private toastController: ToastController) {}\n\n  public async createWithJustMessage(\n    message: string,\n    type: ToastType = ToastType.Info\n  ) {\n    const toast = await this.toastController.create({\n      message,\n      duration: 3000,\n      position: 'top',\n      color: this.getColorFromType(type),\n    })\n    await toast.present()\n  }\n\n  private getColorFromType(type: ToastType): string {\n    switch (type) {\n      case ToastType.Success:\n        return 'success'\n      case ToastType.Warning:\n        return 'warning'\n      case ToastType.Error:\n        return 'danger'\n      case ToastType.Info:\n      default:\n        return 'primary'\n    }\n  }\n}\n", "import { Injectable } from '@angular/core'\nimport { TranslateService } from '@ngx-translate/core'\nimport { ToastService, ToastType } from './toast.service'\n\n/**\n * Simplified error handling service - Uses direct error codes as translation keys\n * Much simpler and maintainable approach\n */\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ErrorHandlerService {\n  constructor(\n    private translate: TranslateService,\n    private toastService: ToastService\n  ) {}\n\n  /**\n   * Main entry point for handling any type of error\n   * Uses error.title directly as translation key\n   */\n  handleError(error: any) {\n    let errorKey: string | null = null\n    if (error.error && error.error.title) {\n      errorKey = error.error.title\n    } else if (error.decline_code) {\n      errorKey = error.decline_code\n    } else if (error.code && error.message) {\n      errorKey = this.extractCognitoErrorKey(error.message) || error.code\n    } else if (error.name && error.message) {\n      errorKey = this.extractCognitoErrorKey(error.message) || error.name\n    } else if (error.message) {\n      errorKey = this.convertToSnakeCase(error.message)\n    }\n\n    if (!errorKey || errorKey === '' || errorKey === 'Bad Request') {\n      this.toastService.createWithJustMessage(\n        this.translate.instant('error.generic'),\n        ToastType.Error\n      )\n      return\n    }\n    this.toastService.createWithJustMessage(\n      this.translate.instant('error.key.' + errorKey),\n      ToastType.Error\n    )\n  }\n\n  /**\n   * Extract Cognito error key from message before the pipe |\n   * Example: \"PreSignUp failed with error phone_number_already_used | Un utilisateur existe déjà...\"\n   * Returns: \"phone_number_already_used\"\n   */\n  private extractCognitoErrorKey(message: string): string | null {\n    // Match word before the pipe |\n    const match = message.match(/(\\w+)\\s*\\|/)\n    if (match && match[1]) {\n      return match[1]\n    }\n    return null\n  }\n\n  private convertToSnakeCase(message: string): string {\n    return message\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s]/g, '')\n      .replace(/\\s+/g, '_')\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAGA,IAAY;CAAZ,SAAYA,YAAS;AACnB,EAAAA,WAAAA,WAAA,MAAA,IAAA,CAAA,IAAA;AACA,EAAAA,WAAAA,WAAA,SAAA,IAAA,CAAA,IAAA;AACA,EAAAA,WAAAA,WAAA,SAAA,IAAA,CAAA,IAAA;AACA,EAAAA,WAAAA,WAAA,OAAA,IAAA,CAAA,IAAA;AACF,GALY,cAAA,YAAS,CAAA,EAAA;AAUf,IAAO,gBAAP,MAAO,cAAY;EACvB,YAAoB,iBAAgC;AAAhC,SAAA,kBAAA;EAAmC;EAE1C,sBACX,IACgC;+CADhC,SACA,OAAkB,UAAU,MAAI;AAEhC,YAAM,QAAQ,MAAM,KAAK,gBAAgB,OAAO;QAC9C;QACA,UAAU;QACV,UAAU;QACV,OAAO,KAAK,iBAAiB,IAAI;OAClC;AACD,YAAM,MAAM,QAAO;IACrB;;EAEQ,iBAAiB,MAAe;AACtC,YAAQ,MAAM;MACZ,KAAK,UAAU;AACb,eAAO;MACT,KAAK,UAAU;AACb,eAAO;MACT,KAAK,UAAU;AACb,eAAO;MACT,KAAK,UAAU;MACf;AACE,eAAO;IACX;EACF;;;mCA5BW,eAAY,mBAAA,eAAA,CAAA;AAAA;iFAAZ,eAAY,SAAZ,cAAY,WAAA,YAFX,OAAM,CAAA;AAEd,IAAO,eAAP;;sEAAO,cAAY,CAAA;UAHxB;WAAW;MACV,YAAY;KACb;;;;;ACAK,IAAO,uBAAP,MAAO,qBAAmB;EAC9B,YACU,WACA,cAA0B;AAD1B,SAAA,YAAA;AACA,SAAA,eAAA;EACP;;;;;EAMH,YAAY,OAAU;AACpB,QAAI,WAA0B;AAC9B,QAAI,MAAM,SAAS,MAAM,MAAM,OAAO;AACpC,iBAAW,MAAM,MAAM;IACzB,WAAW,MAAM,cAAc;AAC7B,iBAAW,MAAM;IACnB,WAAW,MAAM,QAAQ,MAAM,SAAS;AACtC,iBAAW,KAAK,uBAAuB,MAAM,OAAO,KAAK,MAAM;IACjE,WAAW,MAAM,QAAQ,MAAM,SAAS;AACtC,iBAAW,KAAK,uBAAuB,MAAM,OAAO,KAAK,MAAM;IACjE,WAAW,MAAM,SAAS;AACxB,iBAAW,KAAK,mBAAmB,MAAM,OAAO;IAClD;AAEA,QAAI,CAAC,YAAY,aAAa,MAAM,aAAa,eAAe;AAC9D,WAAK,aAAa,sBAChB,KAAK,UAAU,QAAQ,eAAe,GACtC,UAAU,KAAK;AAEjB;IACF;AACA,SAAK,aAAa,sBAChB,KAAK,UAAU,QAAQ,eAAe,QAAQ,GAC9C,UAAU,KAAK;EAEnB;;;;;;EAOQ,uBAAuB,SAAe;AAE5C,UAAM,QAAQ,QAAQ,MAAM,YAAY;AACxC,QAAI,SAAS,MAAM,CAAC,GAAG;AACrB,aAAO,MAAM,CAAC;IAChB;AACA,WAAO;EACT;EAEQ,mBAAmB,SAAe;AACxC,WAAO,QACJ,YAAW,EACX,KAAI,EACJ,QAAQ,YAAY,EAAE,EACtB,QAAQ,QAAQ,GAAG;EACxB;;;mCAzDW,sBAAmB,mBAAA,gBAAA,GAAA,mBAAA,YAAA,CAAA;AAAA;wFAAnB,sBAAmB,SAAnB,qBAAmB,WAAA,YAFlB,OAAM,CAAA;AAEd,IAAO,sBAAP;;sEAAO,qBAAmB,CAAA;UAH/B;WAAW;MACV,YAAY;KACb;;;",
  "names": ["ToastType"]
}
