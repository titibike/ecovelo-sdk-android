{
  "version": 3,
  "sources": ["src/app/pages/auth/external-auth-failed/external-auth-failed.page.ts", "src/app/pages/auth/external-auth-failed/external-auth-failed.page.html"],
  "sourcesContent": ["import { Component, OnInit } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport {\n  IonContent,\n  IonButton,\n  IonText,\n  IonIcon,\n} from '@ionic/angular/standalone'\nimport { TranslateModule, TranslateService } from '@ngx-translate/core'\nimport { HeaderComponent } from 'src/app/components/header/header.component'\nimport { AuthService } from 'src/app/services/external/auth.service'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { Browser } from '@capacitor/browser'\nimport { Capacitor } from '@capacitor/core'\nimport { addIcons } from 'ionicons'\nimport { logInOutline, alertCircleOutline } from 'ionicons/icons'\nimport { ErrorHandlerService } from 'src/app/services/utils/error-handler.service'\n\n@Component({\n  selector: 'app-external-auth-failed',\n  templateUrl: './external-auth-failed.page.html',\n  styleUrls: ['./external-auth-failed.page.scss'],\n  imports: [\n    IonContent,\n    IonButton,\n    IonText,\n    IonIcon,\n    CommonModule,\n    TranslateModule,\n    HeaderComponent,\n  ],\n})\nexport class ExternalAuthFailedPage implements OnInit {\n  public errorMessage = ''\n  public isSigningOut = true\n\n  constructor(\n    private translateService: TranslateService,\n    private route: ActivatedRoute,\n    private router: Router,\n    public authService: AuthService,\n    private errorHandler: ErrorHandlerService\n  ) {\n    addIcons({ logInOutline, alertCircleOutline })\n  }\n\n  async ngOnInit() {\n    // First, close any open in-app browser\n    await this.closeInAppBrowser()\n\n    // Then sign out the user\n    await this.signOutUser()\n\n    // Check query parameters for specific error information\n    this.route.queryParams.subscribe((params) => {\n      if (params['error']) {\n        this.errorMessage = params['error']\n      } else {\n        this.errorMessage = this.translateService.instant(\n          'external_auth.generic_error'\n        )\n      }\n    })\n  }\n\n  private async closeInAppBrowser() {\n    try {\n      if (Capacitor.isNativePlatform()) {\n        await Browser.close()\n      }\n    } catch (error) {\n      // Browser might not be open, ignore error\n      console.log('No browser to close or error closing browser:', error)\n    }\n  }\n\n  private async signOutUser() {\n    try {\n      this.authService.signOut(true) // Bypass redirection\n      this.isSigningOut = false\n    } catch (error) {\n      this.errorHandler.handleError(error)\n      this.isSigningOut = false\n    }\n  }\n\n  public async signInAgain() {\n    // Navigate to sign-in page (user is already signed out)\n    this.router.navigate(['/signin'], { replaceUrl: true })\n  }\n}\n", "<app-header [title]=\"'external_auth.title' | translate\"></app-header>\n\n<ion-content class=\"ion-padding\">\n  <div class=\"error-container\">\n    <!-- Error Icon -->\n    <div class=\"error-icon\">\n      <ion-icon\n        name=\"alert-circle-outline\"\n        size=\"large\"\n        color=\"danger\"\n      ></ion-icon>\n    </div>\n\n    <!-- Error Title -->\n    <h2 class=\"error-title\">{{ 'external_auth.failed_title' | translate }}</h2>\n\n    <!-- Error Message -->\n    <div class=\"error-message\">\n      <ion-text color=\"medium\">\n        <p>{{ errorMessage }}</p>\n      </ion-text>\n    </div>\n\n    <!-- Loading State -->\n    <div *ngIf=\"isSigningOut\" class=\"loading-container\">\n      <ion-text color=\"medium\">\n        <p>{{ 'external_auth.signing_out' | translate }}</p>\n      </ion-text>\n    </div>\n\n    <!-- Action Button -->\n    <div *ngIf=\"!isSigningOut\" class=\"action-buttons\">\n      <!-- Sign In Again Button -->\n      <ion-button\n        expand=\"block\"\n        color=\"primary\"\n        (click)=\"signInAgain()\"\n        class=\"action-button\"\n      >\n        <ion-icon name=\"log-in-outline\" slot=\"start\"></ion-icon>\n        {{ 'external_auth.sign_in_again' | translate }}\n      </ion-button>\n    </div>\n\n    <!-- Help Text -->\n    <div class=\"help-text\">\n      <ion-text color=\"medium\">\n        <p>{{ 'external_auth.help_text' | translate }}</p>\n      </ion-text>\n    </div>\n  </div>\n</ion-content>\n"],
  "mappings": "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",
  "names": []
}
