{
  "version": 3,
  "sources": ["src/app/pages/account/cgu/cgu.page.ts", "src/app/pages/account/cgu/cgu.page.html"],
  "sourcesContent": ["import { Component, effect } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { IonicModule } from '@ionic/angular'\nimport { CguComponent } from 'src/app/components/modals/cgu/cgu.component'\nimport { HeaderComponent } from 'src/app/components/header/header.component'\nimport {\n  CguService,\n  cguLoadingState,\n} from 'src/app/services/api-wrappers/cgu.service'\nimport { TranslateModule } from '@ngx-translate/core'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport {\n  AccountService,\n  cyclistState,\n} from 'src/app/services/api-wrappers/account.service'\nimport { ErrorHandlerService } from 'src/app/services/utils/error-handler.service'\n@Component({\n  selector: 'app-cgu-page',\n  templateUrl: './cgu.page.html',\n  imports: [\n    CommonModule,\n    IonicModule,\n    CguComponent,\n    HeaderComponent,\n    TranslateModule,\n  ],\n})\nexport class CguPage {\n  cguLoadingState: cguLoadingState\n  cyclistState: cyclistState = {\n    state: 'unknown',\n    blocked_reasons: ['Unknown account state'],\n  }\n  nextUrl: string | null = null\n  constructor(\n    public cguService: CguService,\n    private router: Router,\n    private accountService: AccountService,\n    private errorHandler: ErrorHandlerService,\n    private route: ActivatedRoute\n  ) {\n    this.route.queryParams.subscribe((params) => {\n      if (params['nextUrl']) {\n        this.nextUrl = params['nextUrl']\n      }\n    })\n    this.cguService.cguLoadingState.subscribe((state) => {\n      this.cguLoadingState = state\n    })\n    effect(() => {\n      this.cyclistState = this.accountService.cyclistState()\n    })\n  }\n\n  async validateTerms() {\n    await this.cguService\n      .validateTerms()\n      .then(async () => {\n        await this.router.navigate(['/cgu-congrats'], {\n          queryParams: { nextUrl: this.nextUrl },\n        })\n      })\n      .catch(async (error) => {\n        this.errorHandler.handleError(error)\n      })\n  }\n}\n", "<app-header [defaultHref]=\"'/account/settings'\"></app-header>\n<ion-content>\n  <app-cgu></app-cgu>\n</ion-content>\n<ion-footer class=\"ion-padding\">\n  @if(cguLoadingState.state === 'success' && cyclistState.state === 'active' &&\n  cyclistState.cyclist.registrations?.data?.[0]?.terms_validated) {\n  <ion-item lines=\"none\" class=\"ion-text-center\">\n    <ion-text>\n      {{ 'cgu.accepted_on' | translate }} {{\n      cyclistState.cyclist.registrations?.data?.[0]?.terms_validated_at! * 1000\n      | date : 'dd/MM/yyyy' }}\n    </ion-text>\n  </ion-item>\n  } @else if (cguLoadingState.state === 'success' && cyclistState.state !==\n  'unknown' && cyclistState.state !== 'error' &&\n  cyclistState.cyclist.registrations?.data?.[0]?.terms_validated === false) {\n  <ion-card class=\"ion-no-margin\">\n    <ion-card-content class=\"ion-text-center\">\n      <ion-text\n        >{{ 'cgu.update_message' | translate }} {{ cguLoadingState.cgu.updated!\n        * 1000 | date : 'dd/MM/yyyy' }}</ion-text\n      >\n    </ion-card-content>\n  </ion-card>\n  <ion-button (click)=\"validateTerms()\" expand=\"block\" class=\"ion-margin\">\n    {{ 'cgu.accept_button' | translate }}\n  </ion-button>\n  }\n</ion-footer>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOE,IAAA,yBAAA,GAAA,YAAA,CAAA,EAA+C,GAAA,UAAA;AAE3C,IAAA,iBAAA,CAAA;;;AAGF,IAAA,uBAAA,EAAW;;;;AAHT,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,sBAAA,GAAA,GAAA,iBAAA,GAAA,KAAA,sBAAA,GAAA,IAAA,OAAA,aAAA,QAAA,iBAAA,OAAA,OAAA,OAAA,aAAA,QAAA,cAAA,QAAA,OAAA,OAAA,OAAA,aAAA,QAAA,cAAA,KAAA,CAAA,KAAA,OAAA,OAAA,OAAA,aAAA,QAAA,cAAA,KAAA,CAAA,EAAA,sBAAA,KAAA,YAAA,GAAA,GAAA;;;;;;AAQJ,IAAA,yBAAA,GAAA,YAAA,CAAA,EAAgC,GAAA,oBAAA,CAAA,EACY,GAAA,UAAA;AAErC,IAAA,iBAAA,CAAA;;;AAC8B,IAAA,uBAAA,EAChC,EACgB;AAErB,IAAA,yBAAA,GAAA,cAAA,CAAA;AAAY,IAAA,qBAAA,SAAA,SAAA,6DAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,cAAA,CAAe;IAAA,CAAA;AAClC,IAAA,iBAAA,CAAA;;AACF,IAAA,uBAAA;;;;AAPO,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,IAAA,sBAAA,GAAA,GAAA,oBAAA,GAAA,KAAA,sBAAA,GAAA,GAAA,OAAA,gBAAA,IAAA,UAAA,KAAA,YAAA,GAAA,EAAA;AAML,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,sBAAA,GAAA,GAAA,mBAAA,GAAA,GAAA;;;ADCE,IAAO,WAAP,MAAO,SAAO;EAOlB,YACS,YACC,QACA,gBACA,cACA,OAAqB;AAJtB,SAAA,aAAA;AACC,SAAA,SAAA;AACA,SAAA,iBAAA;AACA,SAAA,eAAA;AACA,SAAA,QAAA;AAVV,SAAA,eAA6B;MAC3B,OAAO;MACP,iBAAiB,CAAC,uBAAuB;;AAE3C,SAAA,UAAyB;AAQvB,SAAK,MAAM,YAAY,UAAU,CAAC,WAAU;AAC1C,UAAI,OAAO,SAAS,GAAG;AACrB,aAAK,UAAU,OAAO,SAAS;MACjC;IACF,CAAC;AACD,SAAK,WAAW,gBAAgB,UAAU,CAAC,UAAS;AAClD,WAAK,kBAAkB;IACzB,CAAC;AACD,WAAO,MAAK;AACV,WAAK,eAAe,KAAK,eAAe,aAAY;IACtD,CAAC;EACH;EAEM,gBAAa;;AACjB,YAAM,KAAK,WACR,cAAa,EACb,KAAK,MAAW;AACf,cAAM,KAAK,OAAO,SAAS,CAAC,eAAe,GAAG;UAC5C,aAAa,EAAE,SAAS,KAAK,QAAO;SACrC;MACH,EAAC,EACA,MAAM,CAAO,UAAS;AACrB,aAAK,aAAa,YAAY,KAAK;MACrC,EAAC;IACL;;;;mCAtCW,UAAO,4BAAA,UAAA,GAAA,4BAAA,MAAA,GAAA,4BAAA,cAAA,GAAA,4BAAA,mBAAA,GAAA,4BAAA,cAAA,CAAA;AAAA;yEAAP,UAAO,WAAA,CAAA,CAAA,cAAA,CAAA,GAAA,OAAA,GAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,aAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,SAAA,QAAA,GAAA,iBAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,GAAA,iBAAA,GAAA,CAAA,UAAA,SAAA,GAAA,cAAA,GAAA,OAAA,CAAA,GAAA,UAAA,SAAA,iBAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;AC3BpB,IAAA,oBAAA,GAAA,cAAA,CAAA;AACA,IAAA,yBAAA,GAAA,aAAA;AACE,IAAA,oBAAA,GAAA,SAAA;AACF,IAAA,uBAAA;AACA,IAAA,yBAAA,GAAA,cAAA,CAAA;AACE,IAAA,qBAAA,GAAA,gCAAA,GAAA,GAAA,YAAA,CAAA,EACiE,GAAA,gCAAA,GAAA,EAAA;AAuBnE,IAAA,uBAAA;;;AA7BY,IAAA,qBAAA,eAAA,mBAAA;AAKV,IAAA,oBAAA,CAAA;AAAA,IAAA,wBAAA,IAAA,gBAAA,UAAA,aAAA,IAAA,aAAA,UAAA,aAAA,IAAA,aAAA,QAAA,iBAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,QAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,KAAA,CAAA,KAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,KAAA,CAAA,EAAA,mBAAA,IAAA,IAAA,gBAAA,UAAA,aAAA,IAAA,aAAA,UAAA,aAAA,IAAA,aAAA,UAAA,YAAA,IAAA,aAAA,QAAA,iBAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,QAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,KAAA,CAAA,KAAA,OAAA,OAAA,IAAA,aAAA,QAAA,cAAA,KAAA,CAAA,EAAA,qBAAA,QAAA,IAAA,EAAA;;;EDeE;EAAY;EACZ;EAAW;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EACX;EACA;EACA;EAAe;AAAA,GAAA,eAAA,EAAA,CAAA;AAGb,IAAO,UAAP;;sEAAO,SAAO,CAAA;UAXnB;uBACW,gBAAc,SAEf;MACP;MACA;MACA;MACA;MACA;OACD,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,CAAA;;;;6EAEU,SAAO,EAAA,WAAA,WAAA,UAAA,yCAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
